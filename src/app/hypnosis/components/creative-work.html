<div *ngIf="creativeWork | async as creativeWork; else loading">
  <h1 *ngIf="includeTitle">{{ creativeWork.title }}</h1>

  <markdown [data]="creativeWork.description"></markdown>

  <mat-divider></mat-divider>

  <h3>Available in</h3>
  <mat-button-toggle-group [value]="creativeWork.language" disabled>
    <mat-button-toggle [value]="creativeWork.language">{{
      creativeWork.language.toUpperCase()
    }}</mat-button-toggle>
    <mat-button-toggle
      *ngFor="let lang of $any(creativeWork.translatedWorks) | keyvalue"
      [value]="lang.key"
      >{{ lang.key.toUpperCase() }}</mat-button-toggle
    >
  </mat-button-toggle-group>

  <table mat-table [dataSource]="[creativeWork]">
    <ng-container matColumnDef="author">
      <th mat-header-cell *matHeaderCellDef>Author</th>
      <td mat-cell *matCellDef="let element">
        <author [author]="$any(element.author) | fetch: 'author'"></author>
      </td>
    </ng-container>

    <ng-container matColumnDef="speaker">
      <th mat-header-cell *matHeaderCellDef>Speaker</th>
      <td mat-cell *matCellDef="let element">
        <author [author]="element.speaker | fetch: 'author'"></author>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['speaker', 'author']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['speaker', 'author']"></tr>
  </table>
</div>
<ng-template #loading>
  <mat-spinner></mat-spinner>
</ng-template>
